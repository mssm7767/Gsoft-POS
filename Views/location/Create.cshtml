@model GSoftPosNew.Models.Location

@{
    ViewData["Title"] = "Add Location";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var locations = ViewBag.Locations as List<GSoftPosNew.Models.Location>;
}

<div class="container py-5">
    <div class="row g-4">
        <!-- LEFT: Add Location Form -->
        <div class="col-lg-5">
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header text-white d-flex align-items-center rounded-top-4"
                     style="background: linear-gradient(93deg,#005c97 65%,#363795 100%);">
                    <a asp-controller="Dashboard" asp-action="Index" class="btn btn-light btn-sm me-3 rounded-circle shadow-none" style="padding:4px 7px 3px 7px;" title="Back to Dashboard">
                        <i class="fa fa-arrow-left text-primary"></i>
                    </a>
                    <i class="fa fa-map-marker-alt fa-lg me-2"></i>
                    <span class="fw-bold fs-5">Add Location</span>
                </div>
                <div class="card-body bg-light rounded-bottom-4">
                    @if (TempData["Message"] != null)
                    {
                        <div class="alert alert-success text-center shadow-sm mb-3">
                            <i class="fa fa-check-circle me-1"></i> @TempData["Message"]
                        </div>
                    }
                    @using (Html.BeginForm("Create", "Location", FormMethod.Post))
                    {
                        @Html.AntiForgeryToken()
                        <div class="mb-3">
                            <label class="form-label fw-semibold"><i class="fa fa-map-pin text-primary me-1"></i> Location Name *</label>
                            @Html.TextBoxFor(m => m.Name, new { @class = "form-control", placeholder = "Location Name" })
                            @Html.ValidationMessageFor(m => m.Name, "", new { @class = "text-danger" })
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-semibold"><i class="fa fa-align-left text-info me-1"></i> Description</label>
                            @Html.TextAreaFor(m => m.Description, 3, 100, new { @class = "form-control", placeholder = "Description" })
                        </div>
                        <div class="d-flex gap-2 justify-content-end mt-4">
                            <button type="submit" class="btn btn-primary btn-lg rounded-pill shadow" style="background:linear-gradient(93deg,#005c97 65%,#363795 100%);border:none;">
                                <i class="fa fa-save me-1"></i> Save Location
                            </button>
                            <button type="button" class="btn btn-outline-secondary btn-lg rounded-pill shadow" onclick="clearForm()">
                                <i class="fa fa-eraser me-1"></i> Clear
                            </button>
                        </div>
                    }
                </div>
            </div>
        </div>
        <!-- RIGHT: List -->
        <div class="col-lg-7">
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-header d-flex align-items-center rounded-top-4"
                     style="background: linear-gradient(93deg,#363795 70%,#005c97 100%); color:#fff;">
                    <i class="fa fa-list fa-lg me-2"></i>
                    <span class="fw-bold fs-5">Locations List</span>
                </div>
                <div class="card-body bg-white rounded-bottom-4 p-0">
                    @if (locations != null && locations.Any())
                    {
                        <div class="table-responsive">
                            <table class="table table-hover align-middle mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th style="width:5%;">#</th>
                                        <th><i class="fa fa-map-pin"></i> Name</th>
                                        <th><i class="fa fa-align-left"></i> Description</th>
                                        <th class="text-center" style="width:110px;">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var loc in locations)
                                    {
                                        <tr style="cursor:pointer;">
                                            <td>@loc.Id</td>
                                            <td>@loc.Name</td>
                                            <td>@loc.Description</td>
                                            <td class="text-center">
                                                <a asp-action="Edit" asp-route-id="@loc.Id" class="btn btn-sm btn-outline-primary me-2" title="Edit">
                                                    <i class="fa fa-edit"></i>
                                                </a>
                                                <a asp-action="Delete" asp-route-id="@loc.Id" class="btn btn-sm btn-outline-danger" title="Delete"
                                                   onclick="return confirm('Delete this location?');">
                                                    <i class="fa fa-trash"></i>
                                                </a>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    }
                    else
                    {
                        <div class="p-4 text-center text-muted">
                            <em><i class="fa fa-info-circle me-1"></i>No locations added yet.</em>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function clearForm() {
            document.querySelector('input[name="Name"]').value = '';
            document.querySelector('textarea[name="Description"]').value = '';
        }
    </script>
    <partial name="_ValidationScriptsPartial" />
}
